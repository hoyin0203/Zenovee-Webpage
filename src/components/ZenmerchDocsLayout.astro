---
import BaseLayout from "../layouts/BaseLayout.astro";

type NavItem = { label: string; href: string };

const nav: NavItem[] = [
  { label: "Overview", href: "/products/zenmerch" },
  { label: "Docs home", href: "/products/zenmerch/docs" },
  { label: "FAQ", href: "/products/zenmerch/faq" },
  { label: "Getting started", href: "/products/zenmerch/docs/getting-started" },
  { label: "Theme integration (OS 2.0)", href: "/products/zenmerch/docs/theme-integration" },
  { label: "Templates + targeting", href: "/products/zenmerch/docs/templates-targeting" },
  { label: "Webhooks + CSV export", href: "/products/zenmerch/docs/webhooks-exports" },
  { label: "Troubleshooting", href: "/products/zenmerch/docs/troubleshooting" },
];

type Props = {
  title: string;
  description?: string;
};

const { title, description } = Astro.props as Props;
const path = Astro.url.pathname;
---

<BaseLayout title={title} description={description}>
  <section class="container-pad py-10 sm:py-14">
    <div class="grid gap-8 lg:grid-cols-12 lg:items-start">
      <aside class="lg:col-span-3">
        <div class="card reveal p-4 sticky top-20" data-reveal>
          <div class="text-sm font-semibold text-white/85">ZenMerch docs</div>
          <nav class="mt-3 grid gap-1 text-sm">
            {nav.map((item) => {
              const active = path === item.href;
              return (
                <a
                  class={`rounded-xl px-3 py-2 transition ${
                    active ? "bg-white/[0.08] text-white" : "text-white/70 hover:bg-white/[0.05] hover:text-white"
                  }`}
                  href={item.href}
                >
                  {item.label}
                </a>
              );
            })}
          </nav>
          <div class="mt-4 border-t border-white/10 pt-4 text-xs text-white/55">
            Reviewer-friendly: pricing, docs, FAQ, privacy, terms, and contact are public.
          </div>

          <div class="mt-4 border-t border-white/10 pt-4">
            <div class="text-xs font-semibold text-white/80">Need help?</div>
            <div class="mt-2 grid gap-1 text-xs">
              <a class="text-white/70 hover:text-white" href="/products/zenmerch/docs/troubleshooting">Troubleshooting</a>
              <a class="text-white/70 hover:text-white" href="/products/zenmerch/faq">FAQ</a>
              <a class="text-white/70 hover:text-white" href="/contact">Contact support</a>
            </div>
            <p class="mt-3 text-[11px] text-white/55">
              When contacting support, include your <span class="text-white/80 font-semibold">myshopify.com</span> domain, the theme you’re editing
              (Live vs Draft), and screenshots of Theme Editor → <span class="text-white/80 font-semibold">App embeds</span>.
            </p>
          </div>
        </div>
      </aside>

      <div class="lg:col-span-9">
        <div class="card reveal p-6 sm:p-8" data-reveal>
          <slot />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

