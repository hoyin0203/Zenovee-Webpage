---
import ZenmerchDocsLayout from "../../../../components/ZenmerchDocsLayout.astro";
import ScreenshotFigure from "../../../../components/ScreenshotFigure.astro";
---

<ZenmerchDocsLayout
  title="ZenMerch Templates & Targeting"
  description="Create templates once and apply them across products using targeting rules (tags/title/vendor/type)."
>
  <article class="prose prose-invert max-w-none">
    <h1>Templates + targeting</h1>
    <p>
      Templates are the fastest way to scale ZenMerch across many products. Build a personalizer once, then apply it automatically via rules.
    </p>

    <h2 id="concepts">Key concepts: fields vs layers</h2>
    <ul>
      <li><strong>Fields</strong>: what the customer enters (text, options, uploads).</li>
      <li><strong>Layers</strong>: what appears in the preview (text layers, image frames, backgrounds).</li>
    </ul>
    <p>
      For accurate rendering, each field must be linked to the correct layer (e.g. text field → text layer, upload field → image frame).
    </p>

    <ScreenshotFigure
      src="/images/zenmerch/screenshots/Personalizer-input-fields.png"
      alt="ZenMerch personalizer input fields"
      caption="Fields: text, options, and uploads that buyers interact with."
      aspectClass="aspect-[16/9]"
    />

    <ScreenshotFigure
      src="/images/zenmerch/screenshots/Personalizer-Layers.png"
      alt="ZenMerch personalizer layers"
      caption="Layers: the visual elements that render in the live preview."
      aspectClass="aspect-[16/9]"
    />

    <h2 id="build">Build a template</h2>
    <ol>
      <li>Go to <strong>Templates → New template</strong>.</li>
      <li>Add your fields (text, selects, color/pattern, upload).</li>
      <li>Create layers and link each layer to the correct field.</li>
      <li>Save and name the template clearly (e.g. “Engraving – Name + Message”).</li>
    </ol>

    <h2 id="targeting">Apply via targeting rules</h2>
    <p>Targeting rules can apply templates automatically based on:</p>
    <ul>
      <li>Product <strong>tags</strong></li>
      <li>Product <strong>title</strong> match</li>
      <li><strong>Vendor</strong></li>
      <li>Product <strong>type</strong></li>
    </ul>
    <p>
      We recommend tag-based targeting for most stores because it’s easy to manage and very Shopify-native.
    </p>

    <h3 id="shopify-tags">Shopify tag setup (recommended)</h3>
    <ol>
      <li>Shopify admin → <strong>Products</strong> → open a product.</li>
      <li>In the product editor, find <strong>Tags</strong> and add a tag (example: <code>zenmerch</code>).</li>
      <li>Click <strong>Save</strong>.</li>
      <li>In ZenMerch, create a rule that targets products with that tag.</li>
    </ol>

    <ScreenshotFigure
      src="/images/zenmerch/screenshots/Admin-Products.png"
      alt="ZenMerch admin products targeting"
      caption="Scale tip: rule-based targeting reduces manual product-by-product assignment."
      aspectClass="aspect-[16/9]"
    />

    <h2 id="verify">Verify targeting</h2>
    <ol>
      <li>Open the tagged product page on your storefront.</li>
      <li>Confirm the personalizer loads and the preview updates when you change fields.</li>
    </ol>

    <h2 id="troubleshoot">If targeting isn’t applying</h2>
    <ul>
      <li>Double-check the product was <strong>saved</strong> after adding the tag.</li>
      <li>Confirm you’re viewing the same theme you enabled ZenMerch on (Live vs Draft).</li>
      <li>Confirm the rule/template is enabled and not overridden by a more specific rule.</li>
      <li>Try a hard refresh or an incognito window to bypass cached storefront assets.</li>
    </ul>
  </article>
</ZenmerchDocsLayout>

